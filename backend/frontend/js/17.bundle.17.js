(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{190:function(t,a,e){(function(a){const n=e(6),s=e(2),o=e(218),r=e(255);e(210),e(256),e(214),t.exports=n.View.extend({template:r,className:"modal-dialog",ui:{form:"form",forwarding_host:'input[name="forwarding_host"]',type_error:".forward-type-error",buttons:".modal-footer button",switches:".custom-switch-input",cancel:"button.cancel",save:"button.save"},events:{"change @ui.switches":function(){this.ui.type_error.hide()},"click @ui.save":function(t){if(t.preventDefault(),!this.ui.form[0].checkValidity())return void a('<input type="submit">').hide().appendTo(this.ui.form).click().remove();let e=this,n=this.ui.form.serializeJSON();if(!n.tcp_forwarding&&!n.udp_forwarding)return void this.ui.type_error.show();n.incoming_port=parseInt(n.incoming_port,10),n.forwarding_port=parseInt(n.forwarding_port,10),n.tcp_forwarding=!!n.tcp_forwarding,n.udp_forwarding=!!n.udp_forwarding;let o=s.Api.Nginx.Streams.create,r=!0;this.model.get("id")&&(r=!1,o=s.Api.Nginx.Streams.update,n.id=this.model.get("id")),this.ui.buttons.prop("disabled",!0).addClass("btn-disabled"),o(n).then(t=>{e.model.set(t),s.UI.closeModal((function(){r&&s.Controller.showNginxStream()}))}).catch(t=>{alert(t.message),this.ui.buttons.prop("disabled",!1).removeClass("btn-disabled")})}},initialize:function(t){void 0!==t.model&&t.model||(this.model=new o.Model)}})}).call(this,e(4))},218:function(t,a,e){const n=e(5),s=n.Model.extend({idAttribute:"id",defaults:function(){return{id:void 0,created_on:null,modified_on:null,incoming_port:null,forwarding_host:null,forwarding_port:null,tcp_forwarding:!0,udp_forwarding:!1,enabled:!0,meta:{},owner:null}}});t.exports={Model:s,Collection:n.Collection.extend({model:s})}},255:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal-content">\n    <div class="modal-header">\n        <h5 class="modal-title">'+__e(i18n("streams","form-title",{id:id}))+'</h5>\n        <button type="button" class="close cancel" aria-label="Close" data-dismiss="modal">&nbsp;</button>\n    </div>\n    <div class="modal-body">\n        <form>\n            <div class="row">\n                <div class="col-sm-12 col-md-12">\n                    <div class="form-group">\n                        <label class="form-label">'+__e(i18n("streams","incoming-port"))+' <span class="form-required">*</span></label>\n                        <input name="incoming_port" type="number" class="form-control text-monospace" placeholder="eg: 8080" value="'+__e(incoming_port)+'" required>\n                    </div>\n                </div>\n                <div class="col-sm-8 col-md-8">\n                    <div class="form-group">\n                        <label class="form-label">'+__e(i18n("streams","forwarding-host"))+'<span class="form-required">*</span></label>\n                        <input type="text" name="forwarding_host" class="form-control text-monospace" placeholder="example.com or 10.0.0.1 or 2001:db8:3333:4444:5555:6666:7777:8888" value="'+__e(forwarding_host)+'" autocomplete="off" maxlength="255" required>\n                    </div>\n                </div>\n                <div class="col-sm-4 col-md-4">\n                    <div class="form-group">\n                        <label class="form-label">'+__e(i18n("streams","forwarding-port"))+' <span class="form-required">*</span></label>\n                        <input name="forwarding_port" type="number" class="form-control text-monospace" placeholder="eg: 80" value="'+__e(forwarding_port)+'" required>\n                    </div>\n                </div>\n                <div class="col-sm-6 col-md-6">\n                    <div class="form-group">\n                        <label class="custom-switch">\n                            <input type="checkbox" class="custom-switch-input" name="tcp_forwarding" value="1"'+__e(tcp_forwarding?" checked":"")+'>\n                            <span class="custom-switch-indicator"></span>\n                            <span class="custom-switch-description">'+__e(i18n("streams","tcp-forwarding"))+'</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="col-sm-6 col-md-6">\n                    <div class="form-group">\n                        <label class="custom-switch">\n                            <input type="checkbox" class="custom-switch-input" name="udp_forwarding" value="1"'+__e(udp_forwarding?" checked":"")+'>\n                            <span class="custom-switch-indicator"></span>\n                            <span class="custom-switch-description">'+__e(i18n("streams","udp-forwarding"))+'</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="col-sm-12 col-md-12">\n                    <div class="forward-type-error invalid-feedback">'+__e(i18n("streams","forward-type-error"))+'</div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button type="button" class="btn btn-secondary cancel" data-dismiss="modal">'+__e(i18n("str","cancel"))+'</button>\n        <button type="button" class="btn btn-teal save">'+__e(i18n("str","save"))+"</button>\n    </div>\n</div>\n";return __p}}).call(this,__webpack_require__(3))},256:function(t,a,e){var n,s,o;window.jQuery,window.Zepto,s=[e(4)],void 0===(o="function"==typeof(n=function(t){"use strict";var a=function(a,e,n){var s={invalid:[],getCaret:function(){try{var t,e=0,n=a.get(0),o=document.selection,r=n.selectionStart;return o&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=o.createRange()).moveStart("character",-s.val().length),e=t.text.length):(r||"0"===r)&&(e=r),e}catch(t){}},setCaret:function(t){try{if(a.is(":focus")){var e,n=a.get(0);n.setSelectionRange?n.setSelectionRange(t,t):((e=n.createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select())}}catch(t){}},events:function(){a.on("keydown.mask",(function(t){a.data("mask-keycode",t.keyCode||t.which),a.data("mask-previus-value",a.val()),a.data("mask-previus-caret-pos",s.getCaret()),s.maskDigitPosMapOld=s.maskDigitPosMap})).on(t.jMaskGlobals.useInput?"input.mask":"keyup.mask",s.behaviour).on("paste.mask drop.mask",(function(){setTimeout((function(){a.keydown().keyup()}),100)})).on("change.mask",(function(){a.data("changed",!0)})).on("blur.mask",(function(){i===s.val()||a.data("changed")||a.trigger("change"),a.data("changed",!1)})).on("blur.mask",(function(){i=s.val()})).on("focus.mask",(function(a){!0===n.selectOnFocus&&t(a.target).select()})).on("focusout.mask",(function(){n.clearIfNotMatch&&!o.test(s.val())&&s.val("")}))},getRegexMask:function(){for(var t,a,n,s,o,i,l=[],c=0;c<e.length;c++)(t=r.translation[e.charAt(c)])?(a=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=t.optional,(s=t.recursive)?(l.push(e.charAt(c)),o={digit:e.charAt(c),pattern:a}):l.push(n||s?a+"?":a)):l.push(e.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return i=l.join(""),o&&(i=i.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(i)},destroyEvents:function(){a.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(t){var e,n=a.is("input"),s=n?"val":"text";return arguments.length>0?(a[s]()!==t&&a[s](t),e=a):e=a[s](),e},calculateCaretPosition:function(t){var e=s.getMasked(),n=s.getCaret();if(t!==e){var o=a.data("mask-previus-caret-pos")||0,r=e.length,i=t.length,l=0,c=0,d=0,u=0,p=0;for(p=n;p<r&&s.maskDigitPosMap[p];p++)c++;for(p=n-1;p>=0&&s.maskDigitPosMap[p];p--)l++;for(p=n-1;p>=0;p--)s.maskDigitPosMap[p]&&d++;for(p=o-1;p>=0;p--)s.maskDigitPosMapOld[p]&&u++;if(n>i)n=10*r;else if(o>=n&&o!==i){if(!s.maskDigitPosMapOld[n]){var m=n;n-=u-d,n-=l,s.maskDigitPosMap[n]&&(n=m)}}else n>o&&(n+=d-u,n+=c)}return n},behaviour:function(e){e=e||window.event,s.invalid=[];var n=a.data("mask-keycode");if(-1===t.inArray(n,r.byPassKeys)){var o=s.getMasked(),i=s.getCaret(),l=a.data("mask-previus-value")||"";return setTimeout((function(){s.setCaret(s.calculateCaretPosition(l))}),t.jMaskGlobals.keyStrokeCompensation),s.val(o),s.setCaret(i),s.callbacks(e)}},getMasked:function(t,a){var o,i,l,c=[],d=void 0===a?s.val():a+"",u=0,p=e.length,m=0,f=d.length,v=1,h="push",g=-1,k=0,b=[];for(n.reverse?(h="unshift",v=-1,o=0,u=p-1,m=f-1,i=function(){return u>-1&&m>-1}):(o=p-1,i=function(){return u<p&&m<f});i();){var _=e.charAt(u),w=d.charAt(m),y=r.translation[_];y?(w.match(y.pattern)?(c[h](w),y.recursive&&(-1===g?g=u:u===o&&u!==g&&(u=g-v),o===g&&(u-=v)),u+=v):w===l?(k--,l=void 0):y.optional?(u+=v,m-=v):y.fallback?(c[h](y.fallback),u+=v,m-=v):s.invalid.push({p:m,v:w,e:y.pattern}),m+=v):(t||c[h](_),w===_?(b.push(m),m+=v):(l=_,b.push(m+k),k++),u+=v)}var M=e.charAt(o);p!==f+1||r.translation[M]||c.push(M);var x=c.join("");return s.mapMaskdigitPositions(x,b,f),x},mapMaskdigitPositions:function(t,a,e){var o=n.reverse?t.length-e:0;s.maskDigitPosMap={};for(var r=0;r<a.length;r++)s.maskDigitPosMap[a[r]+o]=1},callbacks:function(t){var o=s.val(),r=o!==i,l=[o,t,a,n],c=function(t,a,e){"function"==typeof n[t]&&a&&n[t].apply(this,e)};c("onChange",!0===r,l),c("onKeyPress",!0===r,l),c("onComplete",o.length===e.length,l),c("onInvalid",s.invalid.length>0,[o,t,a,s.invalid,n])}};a=t(a);var o,r=this,i=s.val();e="function"==typeof e?e(s.val(),void 0,a,n):e,r.mask=e,r.options=n,r.remove=function(){var t=s.getCaret();return r.options.placeholder&&a.removeAttr("placeholder"),a.data("mask-maxlength")&&a.removeAttr("maxlength"),s.destroyEvents(),s.val(r.getCleanVal()),s.setCaret(t),a},r.getCleanVal=function(){return s.getMasked(!0)},r.getMaskedVal=function(t){return s.getMasked(!1,t)},r.init=function(i){if(i=i||!1,n=n||{},r.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,r.byPassKeys=t.jMaskGlobals.byPassKeys,r.translation=t.extend({},t.jMaskGlobals.translation,n.translation),r=t.extend(!0,{},r,n),o=s.getRegexMask(),i)s.events(),s.val(s.getMasked());else{n.placeholder&&a.attr("placeholder",n.placeholder),a.data("mask")&&a.attr("autocomplete","off");for(var l=0,c=!0;l<e.length;l++){var d=r.translation[e.charAt(l)];if(d&&d.recursive){c=!1;break}}c&&a.attr("maxlength",e.length).data("mask-maxlength",!0),s.destroyEvents(),s.events();var u=s.getCaret();s.val(s.getMasked()),s.setCaret(u)}},r.init(!a.is("input"))};t.maskWatchers={};var e=function(){var e=t(this),s={},o=e.attr("data-mask");if(e.attr("data-mask-reverse")&&(s.reverse=!0),e.attr("data-mask-clearifnotmatch")&&(s.clearIfNotMatch=!0),"true"===e.attr("data-mask-selectonfocus")&&(s.selectOnFocus=!0),n(e,o,s))return e.data("mask",new a(this,o,s))},n=function(a,e,n){n=n||{};var s=t(a).data("mask"),o=JSON.stringify,r=t(a).val()||t(a).text();try{return"function"==typeof e&&(e=e(r)),"object"!=typeof s||o(s.options)!==o(n)||s.mask!==e}catch(t){}};t.fn.mask=function(e,s){s=s||{};var o=this.selector,r=t.jMaskGlobals,i=r.watchInterval,l=s.watchInputs||r.watchInputs,c=function(){if(n(this,e,s))return t(this).data("mask",new a(this,e,s))};return t(this).each(c),o&&""!==o&&l&&(clearInterval(t.maskWatchers[o]),t.maskWatchers[o]=setInterval((function(){t(document).find(o).each(c)}),i)),this},t.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each((function(){var a=t(this).data("mask");a&&a.remove().removeData("mask")}))},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(a){((a=a||t.jMaskGlobals.maskElements)instanceof t?a:t(a)).filter(t.jMaskGlobals.dataMaskAttr).each(e)};var s,o,r,i={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&(s="input",r=document.createElement("div"),(o=(s="on"+s)in r)||(r.setAttribute(s,"return;"),o="function"==typeof r[s]),r=null,o),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};t.jMaskGlobals=t.jMaskGlobals||{},(i=t.jMaskGlobals=t.extend(!0,{},i,t.jMaskGlobals)).dataMask&&t.applyDataMask(),setInterval((function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()}),i.watchInterval)})?n.apply(a,s):n)||(t.exports=o)}}]);