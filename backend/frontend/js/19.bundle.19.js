(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{178:function(e,s,n){const i=n(6),t=n(2),a=n(151),r=n(227);n(210),e.exports=i.View.extend({template:r,className:"modal-dialog",ui:{form:"form",buttons:".modal-footer button",cancel:"button.cancel",save:"button.save",error:".secret-error"},events:{"click @ui.save":function(e){e.preventDefault(),this.ui.error.hide();let s=this,n=this.ui.form.serializeJSON(),i="admin@example.com"===this.model.get("email");if("admin@example.com"===n.email)return this.ui.error.text(t.i18n("users","default_error")).show(),void this.ui.buttons.prop("disabled",!1).removeClass("btn-disabled");n.roles=[],(this.model.get("id")===t.Cache.User.get("id")&&this.model.isAdmin()||void 0!==n.is_admin&&n.is_admin)&&(n.roles.push("admin"),delete n.is_admin),n.is_disabled=void 0!==n.is_disabled&&!!n.is_disabled,this.ui.buttons.prop("disabled",!0).addClass("btn-disabled");let a=t.Api.Users.create;this.model.get("id")&&(a=t.Api.Users.update,n.id=this.model.get("id")),a(n).then(e=>{e.id===t.Cache.User.get("id")&&t.Cache.User.set(e),s.model.get("id")!==t.Cache.User.get("id")&&t.Controller.showUsers(),s.model.set(e),t.UI.closeModal((function(){a===t.Api.Users.create?t.Controller.showUserPermissions(s.model):i&&t.Controller.showUserPasswordForm(s.model)}))}).catch(e=>{this.ui.error.text(e.message).show(),this.ui.buttons.prop("disabled",!1).removeClass("btn-disabled")})}},templateContext:function(){let e=this;return{isSelf:function(){return e.model.get("id")===t.Cache.User.get("id")},isAdmin:function(){return t.Cache.User.isAdmin()},isAdminUser:function(){return e.model.isAdmin()},isDisabled:function(){return e.model.isDisabled()}}},initialize:function(e){void 0!==e.model&&e.model||(this.model=new a.Model)}})},210:function(e,s,n){var i,t,a;
/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 2.9.0 (Jan, 2018)

  Copyright (c) 2012-2018 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/t=[n(4)],void 0===(a="function"==typeof(i=function(e){"use strict";e.fn.serializeJSON=function(s){var n,i,t,a,r,l,o,u,d,c,p,m;return n=e.serializeJSON,i=this,t=n.setupOpts(s),a=i.serializeArray(),n.readCheckboxUncheckedValues(a,t,i),r={},e.each(a,(function(e,s){l=s.name,o=s.value,d=n.extractTypeAndNameWithNoType(l),c=d.nameWithNoType,(p=d.type)||(p=n.attrFromInputWithName(i,l,"data-value-type")),n.validateType(l,p,t),"skip"!==p&&(m=n.splitInputNameIntoKeysArray(c),!(u=n.parseValue(o,l,p,t))&&n.shouldSkipFalsy(i,l,c,p,t)||n.deepSet(r,m,u,t))})),r},e.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},boolean:function(e){return-1===["false","null","undefined","","0"].indexOf(e)},null:function(e){return-1===["false","null","undefined","","0"].indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(s){return e.serializeJSON.parseValue(s,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(s){var n,i,t,a,r,l;for(n in l=e.serializeJSON,null==s&&(s={}),t=l.defaultOptions||{},i=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"],s)if(-1===i.indexOf(n))throw new Error("serializeJSON ERROR: invalid option '"+n+"'. Please use one of "+i.join(", "));return r=(a=function(e){return!1!==s[e]&&""!==s[e]&&(s[e]||t[e])})("parseAll"),{checkboxUncheckedValue:a("checkboxUncheckedValue"),parseNumbers:r||a("parseNumbers"),parseBooleans:r||a("parseBooleans"),parseNulls:r||a("parseNulls"),parseWithFunction:a("parseWithFunction"),skipFalsyValuesForTypes:a("skipFalsyValuesForTypes"),skipFalsyValuesForFields:a("skipFalsyValuesForFields"),typeFunctions:e.extend({},a("defaultTypes"),a("customTypes")),useIntKeysAsArrayIndex:a("useIntKeysAsArrayIndex")}},parseValue:function(s,n,i,t){var a,r;return a=e.serializeJSON,r=s,t.typeFunctions&&i&&t.typeFunctions[i]?r=t.typeFunctions[i](s):t.parseNumbers&&a.isNumeric(s)?r=Number(s):!t.parseBooleans||"true"!==s&&"false"!==s?t.parseNulls&&"null"==s?r=null:t.typeFunctions&&t.typeFunctions.string&&(r=t.typeFunctions.string(s)):r="true"===s,t.parseWithFunction&&!i&&(r=t.parseWithFunction(r,n)),r},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var s,n=[];for(s in e)n.push(s);return n},readCheckboxUncheckedValues:function(s,n,i){var t,a,r;null==n&&(n={}),e.serializeJSON,t="input[type=checkbox][name]:not(:checked):not([disabled])",i.find(t).add(i.filter(t)).each((function(i,t){if(a=e(t),null==(r=a.attr("data-unchecked-value"))&&(r=n.checkboxUncheckedValue),null!=r){if(t.name&&-1!==t.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+t.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");s.push({name:t.name,value:r})}}))},extractTypeAndNameWithNoType:function(e){var s;return(s=e.match(/(.*):([^:]+)$/))?{nameWithNoType:s[1],type:s[2]}:{nameWithNoType:e,type:null}},shouldSkipFalsy:function(s,n,i,t,a){var r=e.serializeJSON.attrFromInputWithName(s,n,"data-skip-falsy");if(null!=r)return"false"!==r;var l=a.skipFalsyValuesForFields;if(l&&(-1!==l.indexOf(i)||-1!==l.indexOf(n)))return!0;var o=a.skipFalsyValuesForTypes;return null==t&&(t="string"),!(!o||-1===o.indexOf(t))},attrFromInputWithName:function(e,s,n){var i;return i='[name="'+s.replace(/(:|\.|\[|\]|\s)/g,"\\$1")+'"]',e.find(i).add(e.filter(i)).attr(n)},validateType:function(s,n,i){var t,a;if(t=(a=e.serializeJSON).optionKeys(i?i.typeFunctions:a.defaultOptions.defaultTypes),n&&-1===t.indexOf(n))throw new Error("serializeJSON ERROR: Invalid type "+n+" found in input name '"+s+"', please use one of "+t.join(", "));return!0},splitInputNameIntoKeysArray:function(s){var n;return e.serializeJSON,n=s.split("["),""===(n=e.map(n,(function(e){return e.replace(/\]/g,"")})))[0]&&n.shift(),n},deepSet:function(s,n,i,t){var a,r,l,o,u,d;if(null==t&&(t={}),(d=e.serializeJSON).isUndefined(s))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||0===n.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");a=n[0],1===n.length?""===a?s.push(i):s[a]=i:(r=n[1],""===a&&(u=s[o=s.length-1],a=d.isObject(u)&&(d.isUndefined(u[r])||n.length>2)?o:o+1),""===r||t.useIntKeysAsArrayIndex&&d.isValidArrayIndex(r)?!d.isUndefined(s[a])&&e.isArray(s[a])||(s[a]=[]):!d.isUndefined(s[a])&&d.isObject(s[a])||(s[a]={}),l=n.slice(1),d.deepSet(s[a],l,i,t))}}})?i.apply(s,t):i)||(e.exports=a)},227:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<div class="modal-content">\n    <div class="modal-header">\n        <h5 class="modal-title">'+__e(i18n("users","form-title",{id:id}))+'</h5>\n        <button type="button" class="close cancel" aria-label="Close" data-dismiss="modal">&nbsp;</button>\n    </div>\n    <div class="modal-body">\n        <form>\n            <div class="row">\n                <div class="col-sm-6 col-md-6">\n                    <div class="form-group">\n                        <label class="form-label">'+__e(i18n("users","full-name"))+' <span class="form-required">*</span></label>\n                        <input name="name" type="text" class="form-control" placeholder="Joe Citizen" value="'+__e(name)+'" required>\n                    </div>\n                </div>\n                <div class="col-sm-6 col-md-6">\n                    <div class="form-group">\n                        <label class="form-label">'+__e(i18n("users","nickname"))+'<span class="form-required">*</span> </label>\n                        <input name="nickname" type="text" class="form-control" placeholder="Joe" value="'+__e(nickname)+'" required>\n                    </div>\n                </div>\n                <div class="col-sm-12 col-md-12">\n                    <div class="form-group">\n                        <label class="form-label">'+__e(i18n("str","email"))+' <span class="form-required">*</span></label>\n                        <input name="email" type="email" class="form-control" placeholder="joe@example.com" value="'+__e(email)+'" required>\n                        <div class="invalid-feedback secret-error"></div>\n                    </div>\n                </div>\n                ',isAdmin()&&!isSelf()&&(__p+='\n                <div class="col-sm-12 col-md-12">\n                    <div class="form-label">'+__e(i18n("roles","title"))+'</div>\n                </div>\n                <div class="col-sm-6 col-md-6">\n                    <div class="form-group">\n                        <label class="custom-switch">\n                            <input type="checkbox" class="custom-switch-input" name="is_admin" value="1"'+__e(isAdminUser()?" checked":"")+__e(isSelf()?" disabled":"")+'>\n                            <span class="custom-switch-indicator"></span>\n                            <span class="custom-switch-description">'+__e(i18n("roles","admin"))+'</span>\n                        </label>\n                    </div>\n                </div>\n                <div class="col-sm-6 col-md-6">\n                    <div class="form-group">\n                        <label class="custom-switch">\n                            <input type="checkbox" class="custom-switch-input" name="is_disabled" value="1"'+__e(is_disabled?" checked":"")+__e(isSelf()?" disabled":"")+'>\n                            <span class="custom-switch-indicator"></span>\n                            <span class="custom-switch-description">'+__e(i18n("str","disabled"))+"</span>\n                        </label>\n                    </div>\n                </div>\n                "),__p+='\n            </div>\n        </form>\n    </div>\n    <div class="modal-footer">\n        <button type="button" class="btn btn-secondary cancel" data-dismiss="modal">'+__e(i18n("str","cancel"))+'</button>\n        <button type="button" class="btn btn-teal save">'+__e(i18n("str","save"))+"</button>\n    </div>\n</div>\n";return __p}}).call(this,__webpack_require__(3))}}]);